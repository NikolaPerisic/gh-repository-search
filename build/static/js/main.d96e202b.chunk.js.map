{"version":3,"sources":["List.js","query.js","App.js","index.js"],"names":["list","props","date","Date","updatedAt","toLocaleDateString","homepage","homepageUrl","react_default","a","createElement","href","target","className","url","name","index_es","icon","stars","forks","description","query","variables","first","after","type","library","add","faCodeBranch","faStar","App","state","error","isLoaded","queryString","items","pageInfo","onScroll","window","innerHeight","scrollY","document","body","offsetHeight","_this","length","addContent","getRepos","_callee","response","newItems","regenerator_default","wrap","_context","prev","next","axios","post","headers","Authorization","concat","process","sent","Object","toConsumableArray","data","search","edges","setState","t0","stop","handleInputChange","e","value","handleSearch","preventDefault","newVariables","endCursor","this","addEventListener","removeEventListener","inputValue","_this$state","errorMessage","loading","message","onSubmit","htmlFor","placeholder","onChange","map","item","key","List","node","resourcePath","stargazers","totalCount","style","display","React","Component","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.d96e202b.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst list = props => {\n  let date = new Date(props.updatedAt).toLocaleDateString();\n  let homepage = null;\n  if (props.homepageUrl) {\n    homepage = (\n      <a href={props.homepageUrl} target=\"blank\" className=\"homepageUrl\">\n        {props.homepageUrl}\n      </a>\n    );\n  }\n  return (\n    <div className=\"list-item\">\n      <div className=\"inline-item\">\n        <a href={props.url} target=\"blank\" className=\"url\">\n          {props.name}\n        </a>\n        <div className=\"item-right\">\n          <FontAwesomeIcon icon=\"star\" className=\"starIcon\" />\n          <p className=\"stars\">{props.stars}</p>\n          <FontAwesomeIcon icon=\"code-branch\" className=\"forkIcon\" />\n          <p className=\"forks\">{props.forks}</p>\n        </div>\n      </div>\n      <p>{props.description}</p>\n      <div className=\"detailsInfo\">\n        {homepage}\n        <p className=\"updatedAt\">Updated: {date}</p>\n      </div>\n    </div>\n  );\n};\nexport default list;\n","export const query = `\nquery($first: Int!, $after: String, $query: String!, $type: SearchType!)\n{\n  rateLimit {\n    limit\n    cost\n    remaining\n    resetAt\n  }\n  search(first: $first, after: $after, query: $query, type: $type) {\n    edges {\n      node {\n        ... on Repository {\n          name\n          url\n          homepageUrl\n          resourcePath\n          description\n          stargazers {\n            totalCount\n          }\n          forks {\n            totalCount\n          }\n          updatedAt\n        }\n      }\n    }\n    pageInfo {\n      startCursor\n      hasNextPage\n      endCursor\n    }\n  }\n}\n`;\nexport const variables = {\n  first: 15,\n  after: null,\n  query: \"javascript\",\n  type: \"REPOSITORY\"\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport List from \"./List\";\nimport { query } from \"./query\";\nimport { variables } from \"./query\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faCodeBranch } from \"@fortawesome/free-solid-svg-icons\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\n\nlibrary.add(faCodeBranch, faStar);\n\nclass App extends React.Component {\n  state = {\n    query: query,\n    variables: variables,\n    error: null,\n    isLoaded: false,\n    queryString: \"javascript\",\n    items: [],\n    pageInfo: {}\n  };\n  componentDidMount() {\n    this.getRepos(this.state.query, this.state.variables);\n    window.addEventListener(\"scroll\", this.onScroll, false);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.onScroll, false);\n  }\n  onScroll = () => {\n    if (\n      window.innerHeight + window.scrollY >= document.body.offsetHeight - 100 &&\n      this.state.items.length &&\n      this.state.isLoaded\n    ) {\n      this.addContent();\n    }\n  };\n  getRepos = async (query, variables) => {\n    try {\n      const response = await axios.post(\n        \"https://api.github.com/graphql\",\n        {\n          query,\n          variables\n        },\n        {\n          headers: {\n            Authorization: `token ${process.env.REACT_APP_TOKEN}`\n          }\n        }\n      );\n      let newItems = [...this.state.items].concat(\n        response.data.data.search.edges\n      );\n      this.setState(() => ({\n        isLoaded: true,\n        items: newItems,\n        pageInfo: response.data.data.search.pageInfo\n      }));\n    } catch (error) {\n      this.setState(() => ({ error }));\n    }\n  };\n  handleInputChange = e => {\n    this.setState({ queryString: e.target.value });\n  };\n  handleSearch = e => {\n    e.preventDefault();\n    let newVariables = this.state.variables;\n    newVariables.query = this.state.queryString;\n    this.setState({ variables: newVariables, isLoaded: false, items: [] });\n    this.getRepos(this.state.query, this.state.variables);\n  };\n  addContent = () => {\n    let newVariables = this.state.variables;\n    newVariables.after = this.state.pageInfo.endCursor;\n    this.setState({ isLoaded: false });\n    this.getRepos(this.state.query, newVariables);\n  };\n  render() {\n    const inputValue = this.state.queryString;\n    const { error, isLoaded, items } = this.state;\n    let errorMessage = null,\n      loading = null;\n    if (error) errorMessage = <div>{error.message}</div>;\n    if (!isLoaded) loading = <div className=\"loading-text\">Loading...</div>;\n\n    return (\n      <div className=\"App\">\n        <div className=\"wrapper\">\n          <div className=\"label\">Github repository search</div>\n          <p className=\"label-caption\">Scrolling just got more fun</p>\n          <div>\n            <form className=\"search\" onSubmit={this.handleSearch}>\n              <label htmlFor=\"search\" />\n              <input\n                type=\"text\"\n                name=\"search\"\n                value={inputValue}\n                placeholder=\"search...\"\n                onChange={this.handleInputChange}\n              />\n              <button type=\"submit\">Search</button>\n            </form>\n          </div>\n\n          <div className=\"results\">\n            {error ? errorMessage : loading}\n            {items.map((item, key) => {\n              return (\n                <List\n                  key={key}\n                  description={item.node.description}\n                  url={item.node.url}\n                  name={item.node.resourcePath}\n                  stars={item.node.stargazers.totalCount}\n                  forks={item.node.forks.totalCount}\n                  updatedAt={item.node.updatedAt}\n                  homepageUrl={item.node.homepageUrl}\n                />\n              );\n            })}\n          </div>\n          <div\n            className=\"loader\"\n            style={\n              this.state.isLoaded ? { display: \"none\" } : { display: \"unset\" }\n            }\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}